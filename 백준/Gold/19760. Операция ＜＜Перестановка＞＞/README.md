# [Gold I] Операция <<Перестановка>> - 19760 

[문제 링크](https://www.acmicpc.net/problem/19760) 

### 성능 요약

메모리: 7928 KB, 시간: 28 ms

### 분류

그래프 이론, 그래프 탐색, 깊이 우선 탐색, 방향 비순환 그래프, 위상 정렬

### 제출 일자

2026년 2월 12일 15:59:10

### 문제 설명

<p>Больше всего Генерал Петров любит строевую подготовку. Однажды в построении участвовало $n$ солдат, для простоты пронумерованных от $1$ до $n$. Солдаты выстроились в ряд, при этом на месте $i$ стоял солдат с номером $a_i$. После этого адъютант генерала прошёл вдоль строя и проверил, что перестановка в точности совпадает с придуманной генералом.</p>

<p>Некоторое время спустя генерал захотел снова расставить солдат в том же порядке. Однако он забыл, как именно он расставил солдат в тот раз. К счастью, у адъютанта генерала хорошая память --- про $m$ пар позиций $x_i, y_i$ он помнит, что номер солдата, стоявшего на месте $x_i$, меньше номера солдата, стоявшего на месте $y_i$. </p>

<p>Адъютант стал по очереди сообщать генералу пары $x_i, y_i$. Но генерал хочет побыстрее начать строить солдат. Помогите ему определить такое минимальное $k$, что как только адъютант сообщит ему первые $k$ пар позиций, генерал сможет однозначно определить искомую перестановку.</p>

### 입력 

 <p>В первой строке находятся два целых числа $n$ и $m$ --- количество солдат, участвовавших в операции, и количество пар позиций, которые запомнил адъютант ($2 \le n \le 10^5$; $1 \le m \le 10^5$).</p>

<p>В следующих $m$ строках даны пары, которые помнит адъютант, в том порядке, в котором сообщает их генералу. Каждая строка содержит по два числа $x_i$ и $y_i$, которые означают, что номер солдата на позиции $x_i$ был меньше номера солдата на позиции $y_i$ ($1 \le x_i, y_i \le n$; $x_i \ne y_i$).</p>

<p>Гарантируется, что каждая пара $x_i, y_i$ встречается во входном файле не более одного раза. Гарантируется, что входные данные корректные, то есть существует хотя бы одна перестановка, для которой выполняются все условия, которые помнит адъютант.</p>

### 출력 

 <p>Выведите одно число $k$ --- минимальный номер пары позиций, после произнесения которой можно однозначно восстановить перестановку. Если входные данные таковы, что перестановку однозначно восстановить не удастся, выведите $-1$.</p>

